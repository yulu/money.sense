<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta name="author" content="{{ .Site.Params.author }}">
    {{ if .IsPage }}
      {{ $keywords := slice }}
      {{ with .Params.tags }}
        {{ $keywords = $keywords | append . }}
      {{ end }}
      {{ with .Params.addtags }}
        {{ $keywords = $keywords | append . }}
      {{ end }}
      {{ if gt (len $keywords) 0 }}
        <meta name="keywords" content="{{ delimit $keywords ", " }}">
      {{ end }}
    {{ end }}

    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

    <!-- Open Graph -->
    <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
    <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:site_name" content="{{ .Site.Title }}">
    {{ if .IsPage }}
      {{ $image := "" }}
      {{ with .Params.image }}
        {{ $image = . | absURL }}
      {{ else }}
        {{ with findRE "<img[^>]+src=\"([^\"]+)\"" .Content 1 }}
          {{ $image = index (findRE "src=\"([^\"]+)\"" (index . 0) 1) 0 | replaceRE "src=\"(.+)\"" "$1" | absURL }}
        {{ end }}
      {{ end }}
      {{ with $image }}
        <meta property="og:image" content="{{ . }}">
      {{ else }}
        {{ with $.Site.Params.logo }}
          <meta property="og:image" content="{{ . | absURL }}">
        {{ end }}
      {{ end }}
      <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
      <meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
      {{ with .Params.tags }}
        {{ range first 5 . }}
          <meta property="article:tag" content="{{ . }}">
        {{ end }}
      {{ end }}
    {{ else }}
      {{ with .Site.Params.logo }}
        <meta property="og:image" content="{{ . | absURL }}">
      {{ end }}
    {{ end }}

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
    <meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    {{ if .IsPage }}
      {{ $image := "" }}
      {{ with .Params.image }}
        {{ $image = . | absURL }}
      {{ else }}
        {{ with findRE "<img[^>]+src=\"([^\"]+)\"" .Content 1 }}
          {{ $image = index (findRE "src=\"([^\"]+)\"" (index . 0) 1) 0 | replaceRE "src=\"(.+)\"" "$1" | absURL }}
        {{ end }}
      {{ end }}
      {{ with $image }}
        <meta name="twitter:image" content="{{ . }}">
      {{ else }}
        {{ with $.Site.Params.logo }}
          <meta name="twitter:image" content="{{ . | absURL }}">
        {{ end }}
      {{ end }}
    {{ else }}
      {{ with .Site.Params.logo }}
        <meta name="twitter:image" content="{{ . | absURL }}">
      {{ end }}
    {{ end }}
    {{ with .Site.Params.social.twitter }}
      <meta name="twitter:site" content="@{{ replaceRE "https?://(?:www\\.)?twitter\\.com/" "" . }}">
      <meta name="twitter:creator" content="@{{ replaceRE "https?://(?:www\\.)?twitter\\.com/" "" . }}">
    {{ end }}
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ .Permalink }}">

    <!-- Language Alternates (hreflang) for SEO -->
    {{ if .IsTranslated }}
      {{ range .Translations }}
      <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
      {{ end }}
      <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
      <link rel="alternate" hreflang="x-default" href="{{ .Permalink }}" />
    {{ end }}

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ "images/favicon.ico" | absURL }}">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;1,8..60,400&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{{ "css/fontawesome-all.min.css" | absURL }}">
    
    <!-- Main CSS (compiled from SASS) -->
    {{ $sass := resources.Get "sass/main.scss" }}
    {{ $style := $sass | toCSS (dict "transpiler" "dartsass" "targetPath" "css/main.css") }}
    {{ if hugo.IsProduction }}
        {{ $style = $style | minify | fingerprint }}
    {{ end }}
    <link rel="stylesheet" href="{{ $style.Permalink }}"{{ if hugo.IsProduction }} integrity="{{ $style.Data.Integrity }}"{{ end }}>

    <!-- Cookie Consent -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.css">
    <link rel="stylesheet" href="{{ "css/cookie-consent-custom.css" | absURL }}">
    <script defer src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.umd.js"></script>
    <script defer src="{{ "js/cookie-consent.js" | absURL }}"></script>

	<!--Google Adsense-->
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8770339516304342"
     crossorigin="anonymous"></script>
	<!-- End Google Adsense -->

    <!-- MathJax -->
    {{ if or .Params.math .Site.Params.math }}
    <script>
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    {{ end }}

    <!-- Structured Data (JSON-LD) -->
    {{ partial "structured-data.html" . }}
</head>
