<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
{{ partial "head.html" . }}
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PB2VMZMH"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="wrapper">
        {{ block "main" . }}{{ end }}
    </div>

    <!-- Search Modal -->
    {{ partial "search-modal.html" . }}

    <!-- Fuse.js for client-side search -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js"></script>

    <!-- Search configuration -->
    <script>
        window.searchConfig = {
            basePath: '{{ strings.TrimSuffix "/" (urls.Parse .Site.BaseURL).Path }}'
        };
    </script>

    <!-- Search functionality -->
    <script src="{{ "js/search.js" | absURL }}"></script>

    <script>
    // Typing animation for hero title
    (function() {
        const phrases = ['Money Sense', 'Money Stories', 'Life Stories', 'Life Goals'];
        const typingElement = document.getElementById('typing-text');
        if (!typingElement) return;
        
        let phraseIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        let typingSpeed = 150;
        
        function type() {
            const currentPhrase = phrases[phraseIndex];
            
            if (isDeleting) {
                typingElement.textContent = currentPhrase.substring(0, charIndex - 1);
                charIndex--;
                typingSpeed = 75;
            } else {
                typingElement.textContent = currentPhrase.substring(0, charIndex + 1);
                charIndex++;
                typingSpeed = 150;
            }
            
            if (!isDeleting && charIndex === currentPhrase.length) {
                // Finished typing, wait before deleting
                typingSpeed = 2000;
                isDeleting = true;
            } else if (isDeleting && charIndex === 0) {
                // Finished deleting, move to next phrase
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length;
                typingSpeed = 500;
            }
            
            setTimeout(type, typingSpeed);
        }
        
        // Start typing animation
        type();
    })();
    </script>
</body>
</html>